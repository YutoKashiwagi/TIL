[https://booth.pm/ja/items/1835632](ドメイン駆動設計 モデリング/実装ガイド)

- 良いモデル
  -  問題を解決できるモデル

- ドメインモデルをその他の処理と隔離する
  - 一緒くたにすると、煩雑なコードになってしまう

- 完璧なモデリングより、ボトムアップで設計していくように心がけたい
  - clean architecture本にもトップダウンの設計は無理って書いてあった
  - 最初から完璧は無理なんで、最初のモデリングに時間かけすぎないようにしたい

- 要件が複雑でない場合や、コアコンピタンスが技術的な関心事である場合は、DDDは合わない可能性あり

- 常に正しいインスタンスしか生成させない
  - 生成条件の強制
  - ミューテーション条件の強制

- 3層アーキテクチャ
  - プレゼンテーション層→ビジネスロジック層→データアクセス層
    - ビジネスロジック層→データアクセス層の依存が問題
      - ドメイン知識がこの二つの層に散らばる

- レイヤードアーキテクチャ
  - プレゼンテーション層→アプリケーション層→ドメイン層→インフラ層
    - ドメイン層→インフラ層がやはり課題

- オニオンアーキテクチャ
  - レイヤードアーキテクチャのインフラ層を依存関係逆転の法則を用いたもの
    - インフラ層のインターフェースをドメイン層に、実装をアプリケーション層(ユースケース層)に依存したもの
    - レイヤードアーキテクチャのドメイン層→インフラ層の課題を解決

- 境界づけられたコンテキストの実装
  - 1コンテキスト1アプリケーション
    - コンテキスト間の通信は同期か、非同期
  - パッケージをコンテキストごとに分ける
    - パッケージを跨いだ依存関係に気を付ける

- ファクトリー
  - ドメイン知識の表現のために、リポジトリを参照できる

- DBの値からインスタンスを再生成したい
  - ドメインオブジェクトに再生成用のコンストラクタを追加すると良い

- CQRS
  - データソース分離とモデル分離がある
    - まずはモデル分離から考える
  - 実装クラスのインターフェースはドメイン層ではなく、ユースケース層に定義する
    - どのようなクエリが必要なのかは、ドメインというよりはユースケースに依存するため
  - CQRSは部分的に導入可能
    - 複雑な表を作成しなければいけないところに部分的にクエリモデルを導入してみるとか

## 所感

- ボトムアップでわかるやつとどっちも読んでよかった
