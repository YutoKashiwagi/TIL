# Linuxについてメモ

- lsのオプションの内、-lと-aはよく使う。組み合わせて-la（もしくは-al）と書く。`ls -la`は慣用句的な感じで覚えておく

- linuxのサーバー運用ではログアウトはよくするが、シャットダウンは基本しない
  - サービス事態が停止することになるため

- シェル
  - ユーザーとカーネルのインターフェース
  - シェルとカーネルを分離しておくことで、それぞれ別のソフトに差し替えたり、責任の分担ができる

- シェルを重ねる
  - bash、zshコマンドなどでシェルを重ねることができる
    - ログインシェル
      - bash
        - zsh

- ターミナル
  - コンピュータの入出力時に利用するハードウェア
  - 普段使っているものは物理ターミナルの機能をソフトウェアで実現した、ターミナルエミュレータ
  - ターミナルとシェルは別物なので注意

- linuxは全てがファイル
  - ディレクトリツリーは複数ディスクで構成されていようが、一つになる
    - マウントされて一つになる

- オプション
  - 複数指定する方法
    - `ls`に`-l`, `-a`を指定
      - `ls -al` or `ls -a -l`
  - 引数をとるものもある
    - `ls -w 30`
    - オプションと引数の間のスペースは省略可能
      - `ls -w30`
  - ロングオプション
    - `ls --quote-name`
    - 引数があるものはスペースを入れるか、=を使う
    - `ls --width 30`
    - `ls --width=30`

- リンク
  - ハードリンク
    - 一つのファイルの実態に別名をつける。ややこしいので基本的には使わない
  - シンボリックリンク
    - ファイルへのパスが書かれた小さい特殊ファイル
  - 用途
    - 長いパス名の省略
      - `source`など
    - 特定のバージョンのプログラムに名前をつける
      - `latest`など

- 検索
  - find
    - ディレクトリツリーから探す
  - locate
    - ファイル名DBから探す
      - ファイル名DBは定期的に自動更新される
      - DBから探すため、findより高速
    - デフォルトでは入っていないことが多い
    - findより高速
    - 作成してから少したったファイルや、予めインストールされているファイルを探すのに向く

- エイリアス
  - コマンドに別名をつける
  - `type`コマンドでエイリアスなのか、普通のコマンドなのか判別できる
  - 元のコマンドを実行できる
    - `command エイリアス名`
    - `\エイリアス名`

- bash
  - オプションの設定
    - set, shoptコマンドなど
  - シェル変数
    - bash内部で利用される
  - プロンプト設定
    - `PS1='プロンプトの設定'`という形で、プロンプトに表示する項目を自由に変更できる
  - 設定ファイル
    - .bashrc
      - ログインシェル、非ログインシェルでも呼ばれる
      - 基本的に設定は.bashrcに書いておけばよい
    - .bash_profile
      - ログインシェルでしか呼ばれない

- シェルスクリプトの実行
  - 3つの指定方法がある
    - ファイル名を指定して実行
      - `./hoge.sh`
      - このパターンでは、現在のシェルからサブシェルが作られ、そこで実行される
      - 相対パスまたは絶対パスで指定しないと動かないのは、カレントディレクトリがサーチパスの対象ではないから
    - シェルの引数として利用
      - `bash hoge.sh`
    - sourceコマンドを指定して実行
      - `source ./hoge.sh`
        - このパターンでは、現在のシェルで実行される
          - 現在のシェル環境が引き継がれる(aliasなど)
          - bashrcをsourceで読み込む時は、この特徴が利用されている

- 標準出力の結果を取り扱う
  -  `echo "Today is $(date '+%F')"`
    - `$(コマンド)`

- 位置パラメータ
  - [参考](https://shellscript.sunone.me/parameter.html#%E5%BC%95%E6%95%B0%E5%87%A6%E7%90%86%E3%81%AB%E4%BD%BF%E7%94%A8%E3%81%99%E3%82%8B%E5%A4%89%E6%95%B0)


