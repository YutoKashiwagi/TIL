## 目的
- 楽をすること
- Shift Leftすること
  - 上流品質を向上させること
    - left: 上流、right: 下流

## ホワイト/ブラックボックステスト
- ホワイトボックステスト
  - プログラムの内部処理にまで注目したテスト
- ブラックボックステスト
  - プログラムの入出力だけに注目したテスト

## 単体テスト
- 単体テストの定義は曖昧

- コードベースの単体テスト
  - 単機能のテストではない
    - それは機能単位の単体テスト

- 命令網羅(C0カバレッジ)
  - 各条件が一回ずつ実行されていることをテスト
      - 条件A, 条件Bがそれぞれ実行されていることだけテスト
  - 境界値(分岐処理)のテストが抜けるので、あまり意味がない

- 分岐網羅(C1カバレッジ)
  - 分岐のtrue, falseを少なくとも一回以上テストする
    - 条件Aの真偽、条件Bの真偽がそれぞれ網羅されているテスト
  - 分岐網羅に多くのテスト工数を割くべき

## 複雑度
- 分岐が多いほど多い
- `C(複雑度) = (ルートの数) - (分岐点の数) + 2`

## どこを単体テストすべきか
> 改善とは、今ある仕事を減らし、かつ品質を上げること

- 今ある仕事も減らさず、さらにタスクを追加するのは改善とは言わない

- 単体テストをやる箇所を絞る
  - 2:8の法則で考える
    - 何が2に当たるか
      - 直近の変更回数が多いもの
      - ファイル行数が多いもの
      - 複雑度が高いもの

- ファイルを二つに分割してみる

> 一般的に組織は、単体テストをやらず、大きなコストをシステムテストにつぎ込んでいます

## 単機能境界値
- 0をエラーなく処理できるか
- 境界の-1をエラー処理できるか
- データの件数
  - 0、1のとき
  - かなり大きいとき

## 組み合わせ
- 組み合わせを考える時は、そこからバグが出やすいかを考慮する
  - 組み合わせ爆発は避ける
- まず対象が1, 2個の場合をテストし、n個を数個書けば品質的にはほとんど問題ない
- 組み合わせのバグ検出確度は、コードベースの単体テストよりかなり低い

## リファクタリング
- ファイルのコードのリファクタリング
  - 責務が適切に分けられてない場合が多い

- 関数のreturnは1つにする
  - 2つになる場合は、関数の入り口でのパラメータのエラーチェックのみにする

- メトリクス
  - WMC(Weighted Method Per Class)
    - 20以下
