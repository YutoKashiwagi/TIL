# Rubyについて学んだことをメモ

## 勘違いしてた部分

関数を使って加算したいとき

```
balance = 0

def plus_30(balance)
  balance + 30
end

3.times do
  balance = plus_30(balance)
end
```
## 重複した要素を一つだけ削除する

参考: http://simanman.hatenablog.com/entry/2013/03/20/013808

## parse
データ(JSONなど)をRubyオブジェクトに変換する

https://docs.ruby-lang.org/ja/latest/method/JSON/m/parse.html

## 文、式

- Rubyではif文, 関数定義は値を返すため、式として使える
  - Rubyでは式として使えるものが多い

- Rubyの変数は参照渡し

- ライブラリ
  - 組み込みライブラリ
    - Ruby本体に入っていて、requireを書かなくても使える
  - 標準ライブラリ
    - インストール不要で、requireを書いて使える

- ブロック
  - 処理のかたまり
  - 引数を渡せる（ブロック引数）
    - ブロック引数を使わない場合は、省略可能
  - ブロック外の変数も参照可能
    - 名前が重複している場合、ブロック内のものを優先
    - JSと同じ？
  - `do-end`または`{}`を使ってブロックを定義
    - 一行で終わる処理は{}, 複数に跨がる場合はdo-endがよく使われる

- &:記法
  - 以下の条件が揃った時、ブロックの処理を簡潔にかける

①ブロック引数が1個だけである。
②ブロックの中で呼び出すメソッドには引数がない。
③ブロックの中では、ブロック引数に対してメソッドを1回呼び出す以外の処理がない。

> プロを目指す人のためのRuby入門 言語仕様からテスト駆動開発・デバッグ技法まで

- 範囲オブジェクト
  - `1...5`とか
  - 条件の判定や、配列への変換ができる
    - 範囲オブジェクトにそのままeachも使える

`(1..5).to_a #=>[1,2,3,4,5]`

> 最初の値..最後の値（最後の値を含む）最初の値...最後の値（最後の値を含まない  
プロを目指す人のためのRuby入門 言語仕様からテスト駆動開発・デバッグ技法まで

- catchとthrow
  - 例外処理とは関係ない
    - 例外処理はbegin-rescueを使う

- breakとreturn
  - break
    - 一番内側の繰り返し処理からの脱出
      - breakに引数を渡すと、その繰り返し処理の戻り値になる
  - retun
    - メソッド自体の終了

- class
  - self
    - thisキーワードと同じようなもの
    - selfなしでも同クラス内のメソッド、インスタンス変数を参照可能
  - メソッドの公開レベル
    - public
      - クラス外部からも呼び出し可能
    - private
      - レシーバを指定して呼び出せない
        - 内部からのみ呼び出し可という形ではなく、単純にレシーバを指定できない
      - サブクラスからでも呼び出せる
    - protected
      - レシーバ付きで呼び出せるprivateメソッド
        - 外部から呼び出したくないが、同じクラスやサブクラス内で呼び出したいときに使う
  - 定数
    - 定数は上書き可能
      - 普通はしない。絶対にさせたくない場合はfreezeを使う

- 特異メソッド
  - オブジェクトに対して独自のメソッドを追加できる
    - クラスメソッドは特異メソッド

- module
  - is-aの関係にないから継承使いたくないけど、処理は同じ…みたいな状況で有効
  - ミックスイン
    - moduleのinclude
    - ミックスインを使うことで、多重継承のようなことができる
  - Enumerable、Kernelなどはモジュール

- proc
  - ブロックをオブジェクトとして扱うためのクラス
  - メソッドの引数としてブロックを渡すときは制限があるが、proc化してしまえば他のオブジェクトと同様に扱える
  - lamda
    - ほぼprocと同じ挙動だが、若干性質が異なる
      - lamdaの方がブロックの引数チェックが厳密
